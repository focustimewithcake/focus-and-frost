
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Mind Map Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #6b8cbc;
            --accent-color: #ff6b6b;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --success-color: #28a745;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark-color);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            text-align: center;
            padding: 25px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .app-description {
            font-size: 1rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .main-content {
            padding: 25px;
        }
        
        .input-section {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .mode-selector {
            display: flex;
            margin-bottom: 20px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .mode-btn {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: white;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .mode-btn.active {
            background: var(--primary-color);
            color: white;
        }
        
        .mode-btn:not(.active):hover {
            background: #f0f0f0;
        }
        
        .input-area {
            display: none;
            padding: 20px;
            border: 2px dashed #ddd;
            border-radius: 8px;
            background: white;
        }
        
        .input-area.active {
            display: block;
        }
        
        .text-input {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            resize: vertical;
        }
        
        .image-upload-area {
            text-align: center;
            padding: 30px;
            border: 2px dashed var(--secondary-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            background-color: rgba(107, 140, 188, 0.05);
            margin-bottom: 15px;
        }
        
        .image-upload-area:hover {
            background-color: rgba(107, 140, 188, 0.1);
        }
        
        .image-upload-area i {
            font-size: 2.5rem;
            color: var(--secondary-color);
            margin-bottom: 10px;
        }
        
        .upload-text {
            margin-bottom: 15px;
        }
        
        .image-preview-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .image-preview {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .image-preview img {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }
        
        .remove-image {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 255, 255, 0.8);
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .generate-btn-container {
            text-align: center;
            margin-top: 20px;
        }
        
        .btn {
            padding: 12px 30px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
        }
        
        .btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-accent {
            background-color: var(--accent-color);
        }
        
        .btn-accent:hover {
            background-color: #ff5252;
        }
        
        .result-section {
            display: none;
            background: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .result-section.active {
            display: block;
        }
        
        .layout-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .layout-btn {
            padding: 10px 20px;
            background: white;
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .layout-btn.active {
            background: var(--primary-color);
            color: white;
        }
        
        .mindmap-container {
            min-height: 500px;
            border: 1px solid #eaeaea;
            border-radius: 8px;
            padding: 20px;
            background-color: white;
            position: relative;
            overflow: auto;
        }
        
        /* Kiểu cây */
        .tree-layout .node {
            position: absolute;
            background: white;
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            padding: 15px;
            min-width: 180px;
            max-width: 250px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
            z-index: 2;
        }
        
        .tree-layout .central-node {
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--primary-color);
            color: white;
        }
        
        .tree-layout .node-1 { top: 160px; left: 20%; }
        .tree-layout .node-2 { top: 160px; left: 70%; }
        .tree-layout .node-3 { top: 270px; left: 10%; }
        .tree-layout .node-4 { top: 270px; left: 35%; }
        .tree-layout .node-5 { top: 270px; left: 65%; }
        .tree-layout .node-6 { top: 270px; left: 90%; }
        
        /* Kiểu tỏa tròn */
        .radial-layout .node {
            position: absolute;
            background: white;
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            padding: 15px;
            min-width: 180px;
            max-width: 250px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
            z-index: 2;
        }
        
        .radial-layout .central-node {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--primary-color);
            color: white;
        }
        
        .radial-layout .node-1 { top: 25%; left: 25%; }
        .radial-layout .node-2 { top: 25%; left: 65%; }
        .radial-layout .node-3 { top: 50%; left: 10%; }
        .radial-layout .node-4 { top: 50%; left: 80%; }
        .radial-layout .node-5 { top: 75%; left: 25%; }
        .radial-layout .node-6 { top: 75%; left: 65%; }
        
        .node-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--primary-color);
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
            font-size: 1.1rem;
        }
        
        .central-node .node-title {
            color: white;
            border-bottom-color: rgba(255, 255, 255, 0.3);
        }
        
        .node-content {
            font-size: 0.95rem;
            min-height: 60px;
            line-height: 1.5;
        }
        
        .node-image {
            margin-top: 10px;
            max-width: 100%;
            border-radius: 6px;
            max-height: 100px;
            object-fit: cover;
        }
        
        .status-message {
            margin: 15px 0;
            padding: 12px;
            border-radius: 8px;
            display: none;
            font-size: 0.95rem;
            text-align: center;
        }
        
        .status-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status-error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status-info {
            background-color: #e7f3ff;
            color: #004085;
            border: 1px solid #b8daff;
        }
        
        .progress-container {
            margin: 15px 0;
            display: none;
        }
        
        .progress-bar {
            height: 6px;
            background-color: #eee;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 8px;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            width: 0%;
            transition: width 0.4s;
        }
        
        .progress-text {
            font-size: 0.9rem;
            color: #666;
            text-align: center;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #6c757d;
            background-color: #f8f9fa;
            border-top: 1px solid #eee;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .container {
                border-radius: 10px;
            }
            
            header {
                padding: 20px 15px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .mode-selector {
                flex-direction: column;
            }
            
            .layout-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .layout-btn {
                width: 100%;
                justify-content: center;
            }
            
            .mindmap-container {
                min-height: 400px;
                padding: 15px;
            }
            
            .tree-layout .node,
            .radial-layout .node {
                min-width: 150px;
                max-width: 200px;
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>AI Mind Map Generator</h1>
            <p class="app-description">Tạo sơ đồ tư duy từ văn bản hoặc hình ảnh</p>
        </header>
        
        <div class="main-content">
            <div class="input-section">
                <div class="mode-selector">
                    <button class="mode-btn active" data-mode="text">
                        <i class="fas fa-font"></i> Chế độ văn bản
                    </button>
                    <button class="mode-btn" data-mode="image">
                        <i class="fas fa-image"></i> Chế độ hình ảnh
                    </button>
                </div>
                
                <div class="input-area active" id="text-input-area">
                    <textarea class="text-input" id="textInput" placeholder="Nhập văn bản của bạn vào đây..."></textarea>
                </div>
                
                <div class="input-area" id="image-input-area">
                    <div class="image-upload-area" id="imageUploadArea">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p class="upload-text">Nhấn để chọn hình ảnh (tối đa 3 ảnh)</p>
                        <button class="btn">
                            <i class="fas fa-folder-open"></i> Chọn ảnh
                        </button>
                        <input type="file" id="fileInput" accept="image/*" style="display: none;" multiple>
                    </div>
                    
                    <div class="image-preview-container" id="imagePreviewContainer">
                        <!-- Ảnh xem trước sẽ hiển thị ở đây -->
                    </div>
                </div>
                
                <div class="generate-btn-container">
                    <button class="btn" id="generateBtn" disabled>
                        <i class="fas fa-magic"></i> Tạo Sơ Đồ Tư Duy
                    </button>
                </div>
                
                <div class="progress-container" id="progressContainer">
                    <div class="progress-bar">
                        <div class="progress" id="progress"></div>
                    </div>
                    <div class="progress-text" id="progressText">Đang xử lý...</div>
                </div>
                
                <div id="statusMessage" class="status-message"></div>
            </div>
            
            <div class="result-section" id="resultSection">
                <div class="layout-selector">
                    <button class="layout-btn active" data-layout="tree">
                        <i class="fas fa-tree"></i> Sơ đồ hình cây
                    </button>
                    <button class="layout-btn" data-layout="radial">
                        <i class="fas fa-bullseye"></i> Sơ đồ tỏa tròn
                    </button>
                </div>
                
                <div class="mindmap-container tree-layout" id="mindmapContainer">
                    <!-- Sơ đồ tư duy sẽ được hiển thị ở đây -->
                </div>
            </div>
        </div>
        
        <footer>
            <p>© 2023 AI Mind Map Generator | Tạo sơ đồ tư duy thông minh từ nội dung của bạn</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Các phần tử DOM
            const modeBtns = document.querySelectorAll('.mode-btn');
            const textInputArea = document.getElementById('text-input-area');
            const imageInputArea = document.getElementById('image-input-area');
            const textInput = document.getElementById('textInput');
            const fileInput = document.getElementById('fileInput');
            const imageUploadArea = document.getElementById('imageUploadArea');
            const imagePreviewContainer = document.getElementById('imagePreviewContainer');
            const generateBtn = document.getElementById('generateBtn');
            const progressContainer = document.getElementById('progressContainer');
            const progress = document.getElementById('progress');
            const progressText = document.getElementById('progressText');
            const statusMessage = document.getElementById('statusMessage');
            const resultSection = document.getElementById('resultSection');
            const mindmapContainer = document.getElementById('mindmapContainer');
            const layoutBtns = document.querySelectorAll('.layout-btn');
            
            // Biến toàn cục
            let currentMode = 'text';
            let uploadedImages = [];
            let currentLayout = 'tree';
            
            // Xử lý chuyển đổi chế độ
            modeBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const mode = this.getAttribute('data-mode');
                    
                    // Cập nhật trạng thái nút
                    modeBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Ẩn tất cả các khu vực nhập liệu
                    document.querySelectorAll('.input-area').forEach(area => {
                        area.classList.remove('active');
                    });
                    
                    // Hiển thị khu vực nhập liệu tương ứng
                    if (mode === 'text') {
                        textInputArea.classList.add('active');
                        currentMode = 'text';
                    } else {
                        imageInputArea.classList.add('active');
                        currentMode = 'image';
                    }
                    
                    // Kiểm tra xem có thể kích hoạt nút tạo sơ đồ không
                    checkGenerateButton();
                });
            });
            
            // Xử lý tải lên ảnh
            imageUploadArea.addEventListener('click', function() {
                fileInput.click();
            });
            
            fileInput.addEventListener('change', function() {
                if (!this.files.length) return;
                
                const files = Array.from(this.files);
                
                // Kiểm tra số lượng ảnh
                if (uploadedImages.length + files.length > 3) {
                    showStatus('Bạn chỉ có thể tải lên tối đa 3 ảnh!', 'error');
                    return;
                }
                
                // Xử lý từng file
                files.forEach(file => {
                    // Kiểm tra xem có phải là file ảnh không
                    if (!file.type.match('image.*')) {
                        showStatus('Vui lòng chọn file ảnh (JPEG, PNG, GIF)!', 'error');
                        return;
                    }
                    
                    // Kiểm tra kích thước file (giới hạn 5MB)
                    if (file.size > 5 * 1024 * 1024) {
                        showStatus(`Ảnh "${file.name}" quá lớn. Vui lòng chọn ảnh nhỏ hơn 5MB.`, 'error');
                        return;
                    }
                    
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        // Thêm ảnh vào mảng
                        uploadedImages.push({
                            name: file.name,
                            data: e.target.result
                        });
                        
                        // Hiển thị ảnh xem trước
                        displayImagePreview();
                        
                        // Kiểm tra xem có thể kích hoạt nút tạo sơ đồ không
                        checkGenerateButton();
                    };
                    
                    reader.readAsDataURL(file);
                });
                
                // Reset input file để cho phép chọn lại cùng file
                this.value = '';
            });
            
            // Hiển thị ảnh xem trước
            function displayImagePreview() {
                imagePreviewContainer.innerHTML = '';
                
                uploadedImages.forEach((image, index) => {
                    const preview = document.createElement('div');
                    preview.className = 'image-preview';
                    
                    preview.innerHTML = `
                        <img src="${image.data}" alt="${image.name}">
                        <button class="remove-image" data-index="${index}">
                            <i class="fas fa-times"></i>
                        </button>
                    `;
                    
                    imagePreviewContainer.appendChild(preview);
                });
                
                // Thêm sự kiện xóa ảnh
                document.querySelectorAll('.remove-image').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        uploadedImages.splice(index, 1);
                        displayImagePreview();
                        checkGenerateButton();
                    });
                });
            }
            
            // Kiểm tra nút tạo sơ đồ
            function checkGenerateButton() {
                if (currentMode === 'text') {
                    generateBtn.disabled = textInput.value.trim().length === 0;
                } else {
                    generateBtn.disabled = uploadedImages.length === 0;
                }
            }
            
            // Xử lý sự kiện nhập văn bản
            textInput.addEventListener('input', checkGenerateButton);
            
            // Xử lý tạo sơ đồ tư duy
            generateBtn.addEventListener('click', function() {
                // Hiển thị tiến trình
                progressContainer.style.display = 'block';
                progress.style.width = '10%';
                progressText.textContent = 'Đang phân tích nội dung...';
                
                // Vô hiệu hóa nút trong quá trình xử lý
                generateBtn.disabled = true;
                
                // Mô phỏng quá trình xử lý AI
                const steps = [
                    {percent: 30, text: 'Đang trích xuất thông tin...'},
                    {percent: 60, text: 'Đang tổ chức cấu trúc...'},
                    {percent: 90, text: 'Đang tạo sơ đồ tư duy...'},
                    {percent: 100, text: 'Hoàn thành!'}
                ];
                
                let currentStep = 0;
                
                const processStep = () => {
                    if (currentStep < steps.length) {
                        progress.style.width = steps[currentStep].percent + '%';
                        progressText.textContent = steps[currentStep].text;
                        currentStep++;
                        setTimeout(processStep, 1000);
                    } else {
                        // Tạo sơ đồ tư duy
                        createMindMap();
                        
                        // Hiển thị kết quả
                        resultSection.classList.add('active');
                        
                        // Cuộn đến kết quả
                        resultSection.scrollIntoView({ behavior: 'smooth' });
                        
                        // Ẩn tiến trình
                        setTimeout(() => {
                            progressContainer.style.display = 'none';
                            generateBtn.disabled = false;
                        }, 1000);
                        
                        showStatus('Đã tạo sơ đồ tư duy thành công!', 'success');
                    }
                };
                
                processStep();
            });
            
            // Tạo sơ đồ tư duy
            function createMindMap() {
                // Xóa nội dung cũ
                mindmapContainer.innerHTML = '';
                
                // Tạo nội dung mẫu dựa trên chế độ
                let content = '';
                
                if (currentMode === 'text') {
                    content = textInput.value.trim() || "Sơ đồ tư duy là công cụ hiệu quả để tổ chức thông tin. Nó giúp não bộ ghi nhớ và xử lý thông tin tốt hơn. Bắt đầu từ ý tưởng trung tâm, phát triển các nhánh ý tưởng phụ. Mỗi nhánh có thể có các ý con nhỏ hơn. Sử dụng màu sắc và hình ảnh để tăng tính trực quan.";
                } else {
                    content = "Dựa trên hình ảnh đã tải lên, AI đã phân tích và tạo sơ đồ tư duy. Sơ đồ này tổ chức thông tin từ hình ảnh thành các ý tưởng có cấu trúc. Bạn có thể chỉnh sửa nội dung các ô để phù hợp hơn với nhu cầu của mình.";
                }
                
                // Tách văn bản thành các câu
                const sentences = content.split(/[.!?]+/).filter(s => s.trim().length > 0);
                
                // Tạo nút trung tâm
                const centralNode = createNode('Chủ đề chính', sentences.length > 0 ? sentences[0].trim() : 'Nội dung chính', true);
                centralNode.classList.add('central-node');
                
                mindmapContainer.appendChild(centralNode);
                
                // Tạo các nút con từ các câu còn lại
                if (sentences.length > 1) {
                    for (let i = 1; i < Math.min(sentences.length, 7); i++) {
                        const node = createNode(`Ý tưởng ${i}`, sentences[i].trim());
                        node.classList.add(`node-${i}`);
                        mindmapContainer.appendChild(node);
                    }
                } else {
                    // Tạo các nút mẫu nếu không đủ nội dung
                    createSampleNodes();
                }
                
                // Áp dụng layout mặc định (hình cây)
                applyLayout(currentLayout);
            }
            
            // Tạo node mẫu
            function createSampleNodes() {
                const sampleContents = [
                    "Sơ đồ tư duy giúp tổ chức thông tin hiệu quả",
                    "Kích thích tư duy sáng tạo và trí nhớ",
                    "Ứng dụng trong học tập và công việc",
                    "Sử dụng màu sắc và hình ảnh sinh động",
                    "Phát triển ý tưởng từ trung tâm ra các nhánh",
                    "Cá nhân hóa theo phong cách của bạn"
                ];
                
                sampleContents.forEach((content, i) => {
                    const node = createNode(`Nhánh ${i+1}`, content);
                    node.classList.add(`node-${i+1}`);
                    mindmapContainer.appendChild(node);
                });
            }
            
            // Tạo một node mới
            function createNode(title, content, isCentral = false) {
                const node = document.createElement('div');
                node.className = 'node';
                
                node.innerHTML = `
                    <div class="node-title" contenteditable="true">${title}</div>
                    <div class="node-content" contenteditable="true">${content}</div>
                `;
                
                return node;
            }
            
            // Áp dụng layout cho sơ đồ
            function applyLayout(layoutType) {
                // Xóa tất cả các lớp layout cũ
                mindmapContainer.classList.remove('tree-layout', 'radial-layout');
                
                // Thêm lớp layout mới
                mindmapContainer.classList.add(layoutType + '-layout');
                
                // Cập nhật layout hiện tại
                currentLayout = layoutType;
            }
            
            // Xử lý thay đổi layout
            layoutBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Cập nhật trạng thái nút
                    layoutBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Áp dụng layout mới
                    const layoutType = this.getAttribute('data-layout');
                    applyLayout(layoutType);
                });
            });
            
            // Hiển thị thông báo trạng thái
            function showStatus(message, type) {
                statusMessage.textContent = message;
                statusMessage.className = 'status-message';
                statusMessage.classList.add(`status-${type}`);
                statusMessage.style.display = 'block';
                
                // Tự động ẩn thông báo sau 5 giây (trừ lỗi)
                if (type !== 'error') {
                    setTimeout(() => {
                        statusMessage.style.display = 'none';
                    }, 5000);
                }
            }
        });
    </script>
</body>
</html>
